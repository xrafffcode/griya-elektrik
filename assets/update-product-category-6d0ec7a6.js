import{d as E,O as F,r as n,Q as I,R as O,o as k,f as T,i as l,c as o,U as _,N as V,W as j,l as e,B as D,C as M,P as G,j as Q}from"./index-34776078.js";import{u as x}from"./productCategory-e3c69483.js";import{a as d,V as N}from"./VRow-da07817e.js";import{V as W}from"./VCard-03c594b7.js";import{V as q}from"./VForm-d688bd60.js";import{V as z}from"./VImg-f830556b.js";import{V as v}from"./VTextField-4ab46247.js";import{V as A}from"./VFileInput-e4543e03.js";import{V as H}from"./VSelect-3916f4d6.js";/* empty css              */import"./VAvatar-8dc9563c.js";import"./VInput-c04ebae8.js";import"./index-284ca4f8.js";import"./index-21eae2e0.js";import"./forwardRefs-e658ad70.js";import"./VChip-555cf257.js";import"./VMenu-5f48dca3.js";import"./VOverlay-9b6fe595.js";import"./VCheckboxBtn-3f0fce29.js";import"./VSelectionControl-74f61ac8.js";const J=Q("h2",{class:"mb-0"}," Edit Kategori Produk ",-1),L={key:0},Ve={__name:"update-product-category",setup(X){const S=E(),{categories:B,loading:t,error:r}=F(x()),{fetchCategoryById:U,updateCategory:w,fetchEmptyCategory:P}=x(),y=S.params.id,m=n(""),u=n(""),c=n(""),p=n(null),f=n(""),b=n(""),g=n(""),C=async()=>{var i;try{const a=await U(y);m.value=a.code,u.value=a.name,c.value=(i=a.parent)==null?void 0:i.id,b.value=a.image_url,g.value=a.sort_order}catch(a){console.error("Error fetching category data:",a)}};I(()=>{C(),P()});const h=()=>{C()},R=()=>{w({id:y,code:m.value,name:u.value,image:p.value,sort_order:g.value,parent_id:c.value})};O(()=>{h(),r.value=null});const K=i=>{const a=i.target.files[0];a&&(p.value=a,f.value=a.name)};return(i,a)=>(k(),T(N,null,{default:l(()=>[o(d,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:l(()=>[J,o(_,{to:"/admin/kategori-produk",color:"error"},{default:l(()=>[V(" Kembali ")]),_:1})]),_:1}),o(d,{cols:"12"},{default:l(()=>[o(W,null,{default:l(()=>[o(q,{onSubmit:j(R,["prevent"])},{default:l(()=>[o(N,null,{default:l(()=>[o(d,{cols:"12",md:"12"},{default:l(()=>[o(z,{src:b.value,width:"200",height:"auto",class:"mb-4"},null,8,["src"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(v,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=s=>m.value=s),label:"Code",placeholder:"Kode Kategori","error-messages":e(r)&&e(r).code?[e(r).code]:[],disabled:e(t),loading:e(t)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(v,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),label:"Nama",placeholder:"Nama Kategori","error-messages":e(r)&&e(r).name?[e(r).name]:[],disabled:e(t),loading:e(t)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(A,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=s=>p.value=s),"error-messages":e(r)&&e(r).image?[e(r).image]:[],loading:e(t),"prepend-inner-icon":"mdi-image",onChange:K,label:"Gambar"},{"prepend-inner":l(()=>[f.value?(k(),D("span",L,M(f.value),1)):G("",!0)]),_:1},8,["modelValue","error-messages","loading"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(H,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=s=>c.value=s),label:"Parent",items:[{id:"",name:"No Parent"},...e(B)],"item-title":"name","item-value":"id","error-messages":e(r)&&e(r).parent_id?[e(r).parent_id]:[],disabled:e(t),loading:e(t)},null,8,["modelValue","items","error-messages","disabled","loading"])]),_:1}),o(d,{cols:"12",md:"12"},{default:l(()=>[o(v,{modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=s=>g.value=s),label:"Sort Order",placeholder:"Sort Order","error-messages":e(r)&&e(r).sort_order?[e(r).sort_order]:[],disabled:e(t),loading:e(t)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),o(d,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[o(_,{type:"submit",loading:e(t),color:"primary"},{default:l(()=>[V(" Simpan ")]),_:1},8,["loading"]),o(_,{type:"reset",color:"secondary",variant:"tonal",onClick:h},{default:l(()=>[V(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ve as default};
