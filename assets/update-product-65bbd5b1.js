import{d as te,O as S,r as d,Q as re,o as n,f as x,i as l,c as e,j as ue,C as I,U as f,N as s,W as de,l as o,P as R,B as w,F as G,G as H}from"./index-34776078.js";import{E as se}from"./Editor-f9465631.js";import{u as j}from"./product-e0a82d8b.js";import{u as O}from"./productBrand-5da39ef4.js";import{u as z}from"./productCategory-e3c69483.js";import{a as u,V as i}from"./VRow-da07817e.js";import{V as C,a as F,b as J}from"./VCard-03c594b7.js";import{V as ie}from"./VForm-d688bd60.js";import{V as P}from"./VTextField-4ab46247.js";import{V as T}from"./VSelect-3916f4d6.js";import{V as Q}from"./VImg-f830556b.js";import{V as W}from"./VFileInput-e4543e03.js";import{a as ne}from"./VInput-c04ebae8.js";/* empty css              */import"./VAvatar-8dc9563c.js";import"./forwardRefs-e658ad70.js";import"./index-21eae2e0.js";import"./VMenu-5f48dca3.js";import"./index-284ca4f8.js";import"./VOverlay-9b6fe595.js";import"./VCheckboxBtn-3f0fce29.js";import"./VSelectionControl-74f61ac8.js";import"./VChip-555cf257.js";const me={class:"mb-0"},ce={key:0},De={__name:"update-product",setup(pe){const Z=te(),{loading:c,error:r}=S(j()),{fetchProductById:q,updateProduct:A}=j(),{brands:X}=S(O()),{categories:Y}=S(z()),{fetchBrands:$}=O(),{fetchLeafCategories:ee}=z();$(),ee();const E=Z.params.id,v=d(""),p=d(""),g=d(""),V=d(""),b=d(""),h=d(null),U=d(""),B=d(""),k=d(""),M=d(0),K=d(1),L=d([]),D=d([]),y=d([]),m=d([]),le=async()=>{var _,t;try{const a=await q(E);v.value=a.code,p.value=a.name,g.value=(_=a.category)==null?void 0:_.id,V.value=(t=a.brand)==null?void 0:t.id,b.value=a.price,B.value=a.thumbnail_url,k.value=a.description,M.value=a.is_featured===!0?1:0,K.value=a.is_active===!0?1:0,y.value=a.product_images,m.value=a.product_links}catch(a){console.error("Error fetching category data:",a)}};re(()=>{le()});const ae=()=>{A({id:E,code:v.value,name:p.value,product_category_id:g.value,product_brand_id:V.value,price:b.value,thumbnail:h.value,description:k.value,is_featured:M.value,is_active:K.value,product_images:L.value,deleted_images:D.value,product_links:m.value})},oe=_=>{const t=_.target.files[0];t&&(h.value=t,U.value=t.name)};return(_,t)=>(n(),x(i,null,{default:l(()=>[e(u,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:l(()=>[ue("h2",me,I(p.value),1),e(f,{to:"/admin/produk",color:"error"},{default:l(()=>[s(" Kembali ")]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(C,null,{default:l(()=>[e(ie,{onSubmit:de(ae,["prevent"])},{default:l(()=>[e(i,null,{default:l(()=>[e(u,{cols:"12",md:"12"},{default:l(()=>[e(P,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),label:"Code",placeholder:"Kode Kategori","error-messages":o(r)&&o(r).code?[o(r).code]:[],loading:o(c)},null,8,["modelValue","error-messages","loading"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),label:"Nama",placeholder:"Nama Kategori","error-messages":o(r)&&o(r).name?[o(r).name]:[],loading:o(c)},null,8,["modelValue","error-messages","loading"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(T,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),items:o(Y),label:"Kategori",placeholder:"Pilih Kategori","error-messages":o(r)&&o(r).product_category_id?[o(r).product_category_id]:[],"item-title":"name","item-value":"id"},null,8,["modelValue","items","error-messages"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(T,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=a=>V.value=a),items:o(X),label:"Merk",placeholder:"Pilih Merk","error-messages":o(r)&&o(r).product_brand_id?[o(r).product_brand_id]:[],"item-title":"name","item-value":"id"},null,8,["modelValue","items","error-messages"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=a=>b.value=a),label:"Harga",placeholder:"Harga Produk","error-messages":o(r)&&o(r).price?[o(r).price]:[],loading:o(c)},null,8,["modelValue","error-messages","loading"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(C,null,{default:l(()=>[e(F,null,{default:l(()=>[s(" Thumbnail ")]),_:1}),e(J,null,{default:l(()=>[e(i,null,{default:l(()=>[e(u,{cols:"12",md:"12"},{default:l(()=>[B.value?(n(),x(Q,{key:0,src:B.value,"aspect-ratio":"1",cover:"",style:{width:"300px",height:"300px"}},null,8,["src"])):R("",!0)]),_:1})]),_:1}),e(i,{cols:"12",md:"12"},{default:l(()=>[e(W,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=a=>h.value=a),"error-messages":o(r)&&o(r).thumbnail?[o(r).thumbnail]:[],loading:o(c),"prepend-inner-icon":"mdi-image",onChange:oe},{"prepend-inner":l(()=>[U.value?(n(),w("span",ce,I(U.value),1)):R("",!0)]),_:1},8,["modelValue","error-messages","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"12"},{default:l(()=>[e(ne,null,{default:l(()=>[s(" Deskripsi ")]),_:1}),e(o(se),{modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=a=>k.value=a),"api-key":"n6beu7xtuj1u7n0h0iceun23wfp8deo64vo273d6hbhhw7p9",init:{toolbar_mode:"sliding",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}]}},null,8,["modelValue","init"])]),_:1}),e(u,{cols:"12",md:"12"},{default:l(()=>[e(W,{modelValue:L.value,"onUpdate:modelValue":t[7]||(t[7]=a=>L.value=a),label:"Gambar",placeholder:"Pilih Gambar","error-messages":o(r)&&o(r).product_images?[o(r).product_images]:[],multiple:""},null,8,["modelValue","error-messages"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(C,null,{default:l(()=>[e(F,null,{default:l(()=>[s(" Gambar Produk ")]),_:1}),e(J,null,{default:l(()=>[e(i,null,{default:l(()=>[(n(!0),w(G,null,H(y.value,a=>(n(),x(u,{key:a.id,cols:"12",md:"4"},{default:l(()=>[e(Q,{src:a.image_url,"aspect-ratio":"1",cover:""},{default:l(()=>[e(f,{color:"error",style:{position:"absolute",top:"8px",right:"8px"},onClick:()=>D.value.push(a.id)&&y.value.splice(y.value.indexOf(a),1)},{default:l(()=>[s(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(C,null,{default:l(()=>[e(F,null,{default:l(()=>[s(" Link Produk ")]),_:1}),e(i,null,{default:l(()=>[e(u,{cols:"12",md:"4"},{default:l(()=>[e(f,{color:"primary",onClick:t[8]||(t[8]=()=>m.value.push({name:"",url:""}))},{default:l(()=>[s(" Tambah Link Marketplace ")]),_:1})]),_:1})]),_:1}),e(i,null,{default:l(()=>[(n(!0),w(G,null,H(m.value,a=>(n(),x(u,{key:a.id,cols:"12",md:"12"},{default:l(()=>[e(i,null,{default:l(()=>[e(u,{cols:"5"},{default:l(()=>[e(T,{modelValue:a.name,"onUpdate:modelValue":N=>a.name=N,items:[{name:"Tokopedia"},{name:"Shopee"},{name:"Bukalapak"},{name:"Lazada"},{name:"Blibli"},{name:"Elevenia"},{name:"JD.ID"},{name:"Zalora"},{name:"Lainnya"}],label:"Marketplace",placeholder:"Pilih Marketplace","error-messages":o(r)&&o(r).product_links?[o(r).product_links]:[],"item-title":"name","item-value":"name"},null,8,["modelValue","onUpdate:modelValue","items","error-messages"])]),_:2},1024),e(u,{cols:"6"},{default:l(()=>[e(P,{modelValue:a.url,"onUpdate:modelValue":N=>a.url=N,label:"URL",placeholder:"URL Link"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(u,{cols:"1"},{default:l(()=>[e(f,{color:"error",style:{position:"relative",top:"8px"},onClick:()=>m.value.splice(m.value.indexOf(a),1)},{default:l(()=>[s(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(f,{type:"submit",loading:o(c),color:"primary"},{default:l(()=>[s(" Simpan ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{De as default};
