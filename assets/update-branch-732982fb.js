import{d as D,O as Y,r as m,Q as H,o as C,f as x,i as r,c as l,j as K,C as Q,U as I,N as B,W,l as e,B as q,F as z,G as J,P as X}from"./index-34776078.js";import{u as R}from"./branch-dc095a5f.js";import{a as t,V as F}from"./VRow-da07817e.js";import{V as Z}from"./VCard-03c594b7.js";import{V as $}from"./VForm-d688bd60.js";import{V as d}from"./VTextField-4ab46247.js";import{V as ee}from"./VTextarea-fae7a21c.js";import{V as ae}from"./VFileInput-e4543e03.js";import{a as le}from"./VInput-c04ebae8.js";import{V as oe}from"./VImg-f830556b.js";/* empty css              */import"./VAvatar-8dc9563c.js";import"./forwardRefs-e658ad70.js";import"./index-21eae2e0.js";import"./VChip-555cf257.js";import"./index-284ca4f8.js";const re={class:"mb-0"},se=["src"],ke={__name:"update-branch",setup(ue){const T=D(),{loading:L,error:a}=Y(R()),{fetchBranchById:A,updateBranch:G}=R(),N=T.params.id,c=m("AUTO"),i=m(""),f=m(""),p=m(""),v=m(""),g=m(""),b=m(""),V=m(""),_=m(""),h=m(""),y=m(""),U=m(0),S=m(0),M=m(0),n=m([]),k=m([]),O=async()=>{try{const u=await A(N),s=u.branch_images.map(async o=>{(await fetch(o.image_url)).blob().then(E=>{const j=new File([E],o.image_url.split("/").pop(),{type:E.type});n.value.push(j)})});console.log(u.is_active),c.value=u.code,i.value=u.name,f.value=u.map_url,p.value=u.iframe_map,v.value=u.address,g.value=u.city,b.value=u.email,V.value=u.phone,_.value=u.facebook,h.value=u.instagram,y.value=u.youtube,U.value=u.sort,S.value=u.is_active===!0?1:0,M.value=u.is_main===!0?1:0,k.value=u.branch_images}catch(u){console.error("Error fetching branch data:",u)}};H(()=>{O()});const P=()=>{G({id:N,code:c.value,name:i.value,map_url:f.value,iframe_map:p.value,address:v.value,city:g.value,email:b.value,phone:V.value,facebook:_.value,instagram:h.value,youtube:y.value,sort:U.value,is_active:S.value,is_main:M.value,branch_images:n.value})};return(u,s)=>(C(),x(F,null,{default:r(()=>[l(t,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[K("h2",re,Q(i.value),1),l(I,{to:"/admin/konfigurasi-web/cabang",color:"error"},{default:r(()=>[B(" Kembali ")]),_:1})]),_:1}),l(t,{cols:"12"},{default:r(()=>[l(Z,null,{default:r(()=>[l($,{onSubmit:W(P,["prevent"])},{default:r(()=>[l(F,null,{default:r(()=>[l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),label:"Kode Cabang",placeholder:"Kode Cabang","error-messages":e(a)&&e(a).code?[e(a).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),label:"Nama",placeholder:"Nama Cabang","error-messages":e(a)&&e(a).name?[e(a).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o),label:"Map URL",placeholder:"Map URL","error-messages":e(a)&&e(a).map?[e(a).map]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=o=>p.value=o),label:"Iframe Map",placeholder:"Iframe Map","error-messages":e(a)&&e(a).iframe_map?[e(a).iframe_map]:[],onInput:u.getEmbedCode},null,8,["modelValue","error-messages","onInput"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(ee,{modelValue:v.value,"onUpdate:modelValue":s[4]||(s[4]=o=>v.value=o),label:"Alamat",placeholder:"Alamat","error-messages":e(a)&&e(a).address?[e(a).address]:[],rows:11},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[K("iframe",{src:p.value,width:"100%",height:"300",frameborder:"0",style:{border:"0"},allowfullscreen:"","aria-hidden":"false"},null,8,se)]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=o=>g.value=o),label:"Kota",placeholder:"Kota","error-messages":e(a)&&e(a).city?[e(a).city]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=o=>b.value=o),label:"Email",placeholder:"Email","error-messages":e(a)&&e(a).email?[e(a).email]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:V.value,"onUpdate:modelValue":s[7]||(s[7]=o=>V.value=o),label:"Phone",placeholder:"Phone","error-messages":e(a)&&e(a).phone?[e(a).phone]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:_.value,"onUpdate:modelValue":s[8]||(s[8]=o=>_.value=o),label:"Facebook",placeholder:"Facebook","error-messages":e(a)&&e(a).facebook?[e(a).facebook]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:h.value,"onUpdate:modelValue":s[9]||(s[9]=o=>h.value=o),label:"Instagram",placeholder:"Instagram","error-messages":e(a)&&e(a).instagram?[e(a).instagram]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:y.value,"onUpdate:modelValue":s[10]||(s[10]=o=>y.value=o),label:"Youtube",placeholder:"Youtube","error-messages":e(a)&&e(a).youtube?[e(a).youtube]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(d,{modelValue:U.value,"onUpdate:modelValue":s[11]||(s[11]=o=>U.value=o),label:"Sort",placeholder:"Sort","error-messages":e(a)&&e(a).sort?[e(a).sort]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:r(()=>[l(ae,{modelValue:n.value,"onUpdate:modelValue":s[12]||(s[12]=o=>n.value=o),label:"Gambar Cabang",multiple:"","error-messages":e(a)&&e(a).branch_images?[e(a).branch_images]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"12"},{default:r(()=>[l(le,{for:"branch_images",class:"mb-2"},{default:r(()=>[B(" Gambar Cabang ")]),_:1}),k.value.length>0?(C(),x(F,{key:0},{default:r(()=>[(C(!0),q(z,null,J(k.value,(o,w)=>(C(),x(t,{key:w,cols:"12",md:"3"},{default:r(()=>[l(oe,{src:o.image_url,class:"mb-2"},{default:r(()=>[l(I,{color:"error",style:{position:"absolute",top:"8px",right:"8px"},onClick:()=>n.value.splice(n.value.indexOf(o),1)&&k.value.splice(w,1)},{default:r(()=>[B(" Hapus ")]),_:2},1032,["onClick"])]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})):X("",!0)]),_:1}),l(t,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[l(I,{type:"submit",loading:e(L),color:"primary"},{default:r(()=>[B(" Simpan ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ke as default};
